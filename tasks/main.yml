# see https://pelios.csx.cam.ac.uk/~mc321/siesta.html
- name: Install siesta dependencies
  become: true
  apt:
    name:
    - gfortran
    - openmpi-common
    - openmpi-bin
    - libopenmpi-dev
    - libblacs-mpi-dev
    - libnetcdf-dev
    - netcdf-bin
    - libnetcdff-dev
    - libscalapack-mpi-dev
    - libblas-dev
    - liblapack-dev
    - unzip
    - libfftw3-dev

# Compile and install xmlf90
- include: xmlf90.yml
# Compile and install libpsml
- include: libpsml.yml
# Compile and install libgridxc
- include: gridxc-multi.yml

# Compile and install Siesta and utilities
- include: siesta.yml

# Pseudopotentials
- name: Add pseudopotentials
  include_tasks: pps.yml
  vars:
    pp: "{{ item }}"
  with_items: "{{ siesta_pps }}"
  tags: siesta_pps
